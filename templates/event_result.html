{% extends 'base.html' %}
{% block content %}
<!-- <script src ="/static/add_event.js" /> -->
<link rel="stylesheet" href="/static/css/event_result.css">
    <script src="/static/eventmap.js" type="text/javascript"></script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA5HfSHKmN08SlylBPFXkpPTOASF8fc01I&callback=initMap">
    </script>

<script type="text/javascript" src="/static/add_event.js"></script>

  <div id="wrapper">
      <h2>Events</h2>
      <ul id="gallery">
        {% for event in events %}
            <div class="well">
            <li>
                <input type="hidden" value="{{ event.event_id }}" class="test_event_id">
                <div id="event_id" value="{{ event.event_id }}">
                  {{ event.title }} {{ event.date }} {{ event.address }})
                
                <img src = "{{ event.picture }}">
                <button id="{{ event.event_id }}" class="attend" onclick="submitButton({{ event.event_id }})">Attend</button>
                </div>
            </li>
            </div>
            {% endfor %}
      </ul>

  </div>
  <div id="result"></div>



  <style> 
  #map {
    width: 50%;
    height: 800px;
  }
  </style>

  <div id="map"></div>
</div>
<header>

<div class="container">
    <div>
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/homepage">AwesomeEvents</a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="/create_event">Create Event</a></li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                    <li><a href="/event_list_form">Search Event</a></li>
                        <li><a href="/dashboard">Dashboard</a></li>
                    </ul>
                </div>
                <!-- /.navbar-collapse -->
            </div>
            <!-- /.container-fluid -->
        </nav>
    </div>
    </div>
    </header>
<script>
  // var date = {{date}};
  // var address = {{address}};

//   $("button.attend").each( function() {
// event_id = $(this).attr('id')
// console.log(event_id) });
</script>
<div class="container">
  <div class="spaced" style="width:60%">
 
<!-- Here is where we are going to update the 
map with all the points we rendered in the list above -->
    <script>
    events = document.querySelectorAll("#gallery > div > li > input");
    var eventIds = []
    var length = events.length;
    for(var i = 0; i < length; i++) {
        eventIds.push(events[i].value);
    }
    
     renderEvents(eventIds);
    </script>
    
{% endblock %}

